---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import GlobalLayout from '../../layouts/global-layout.astro';
import FormattedDate from '../../components/formatted-date.astro';
import '../../styles/portfolio-index.css';

const projects: array = await getCollection('projects');
projects.sort( (a, b) => b.data.date.valueOf() - a.data.date.valueOf() );
---
<GlobalLayout>
    <h1>Mario Yepes Portfolio</h1>
		<main>
      {projects.map(project => (
        <article data-article-id={project.slug} data-tags={project.data.tags.join(',')}>
          <a href={`/portfolio/${project.slug}`}>
            <Image src={project.data.cover} width={450} alt={`Screenshot for ${project.data.title}`} />
          </a>
          <h2>{project.data.title}</h2>
          <p><strong>Client: </strong>{project.data.client}</p>
          <p>{project.data.summary}</p>
          <ul>{project.data.tags.map( tech => <li><a href={`/portfolio/#${tech}`}>{tech}</a></li>)}</ul>
          <a href={`/portfolio/${project.slug}`}>Read More &rarr;</a>
        </article>
      ))}
</GlobalLayout>

<script>
import '../../scripts/toggle-display-tags.js';
</script>
